<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spend ‚Çπ1 Trillion in 60 Seconds</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --bg: #050509;
      --card: rgba(13, 13, 24, 0.9);
      --accent: #f5c542;
      --accent-soft: rgba(245, 197, 66, 0.18);
      --text-main: #f8f8fc;
      --text-muted: #a3a3c2;
      --danger: #ff4b6a;
      --success: #57e39a;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: stretch;
      background: radial-gradient(circle at top, #1b1630 0, #050509 55%, #000 100%);
      color: var(--text-main);
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 16px;
    }

    .app-shell {
      width: 100%;
      max-width: 520px;
      background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
      border-radius: 26px;
      padding: 18px 16px 18px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow:
        0 30px 70px rgba(0, 0, 0, 0.8),
        0 0 0 1px rgba(255, 255, 255, 0.02);
      backdrop-filter: blur(18px);
      position: relative;
      overflow: hidden;
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .app-title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .app-title {
      font-size: 19px;
      font-weight: 700;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .app-pill {
      font-size: 11px;
      padding: 1px 8px;
      border-radius: 999px;
      border: 1px solid rgba(245, 197, 66, 0.6);
      background: rgba(245, 197, 66, 0.12);
    }

    .app-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .app-badge {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(87, 227, 154, 0.12);
      border: 1px solid rgba(87, 227, 154, 0.5);
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--success);
    }

    .screens {
      position: relative;
      margin-top: 6px;
    }

    .screen {
      display: none;
      animation: fadeIn 0.35s ease-out;
    }

    .screen.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px);}
      to { opacity: 1; transform: translateY(0);}
    }

    /* START SCREEN */

    .start-hero {
      text-align: center;
      padding: 8px 4px 16px;
    }

    .start-hero h1 {
      font-size: 22px;
      margin-bottom: 4px;
    }

    .start-highlight {
      font-size: 26px;
      font-weight: 700;
      color: var(--accent);
    }

    .start-tagline {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 6px;
    }

    .persona-grid {
      margin-top: 14px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .persona-card {
      background: var(--card);
      border-radius: 16px;
      padding: 8px 6px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease, background 0.15s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .persona-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.6);
    }

    .persona-card.selected {
      border-color: var(--accent);
      background: radial-gradient(circle at top, rgba(245, 197, 66, 0.25) 0, rgba(10, 10, 20, 1) 55%);
      box-shadow: 0 0 24px rgba(245, 197, 66, 0.3);
    }

    .persona-emoji {
      font-size: 22px;
    }

    .persona-name {
      font-size: 11px;
      font-weight: 600;
      text-align: center;
    }

    .persona-tag {
      font-size: 10px;
      color: var(--text-muted);
      text-align: center;
      line-height: 1.1;
    }

    .start-footer {
      margin-top: 18px;
      padding: 10px 10px 0;
      border-top: 1px dashed rgba(255, 255, 255, 0.08);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .start-info {
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
    }

    .primary-btn {
      width: 100%;
      padding: 11px 16px;
      border-radius: 999px;
      border: none;
      font-weight: 600;
      background: linear-gradient(135deg, #f5c542, #ffdf89);
      color: #271b02;
      cursor: pointer;
      font-size: 14px;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.75);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease;
    }

    .primary-btn:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.7);
    }

    .primary-btn[disabled] {
      opacity: 0.5;
      box-shadow: none;
      cursor: not-allowed;
    }

    .pill-row {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-top: 4px;
      font-size: 10px;
      color: var(--text-muted);
    }

    .pill-tag {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* GAME SCREEN */

    .game-section {
      margin-top: 6px;
    }

    .status-bar {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 6px;
      font-size: 11px;
      margin-bottom: 10px;
    }

    .status-chip {
      background: rgba(11, 11, 22, 0.9);
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      white-space: nowrap;
    }

    .status-label {
      color: var(--text-muted);
    }

    .status-value {
      font-weight: 600;
    }

    .status-chip.time-danger {
      border-color: var(--danger);
      color: var(--danger);
      box-shadow: 0 0 12px rgba(255, 75, 106, 0.5);
    }

    .money-big {
      font-size: 16px;
      font-weight: 700;
    }

    .money-rupee {
      color: var(--accent);
    }

    .game-card {
      background: var(--card);
      border-radius: 18px;
      padding: 10px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: 0 18px 40px rgba(0,0,0,0.75);
    }

    .game-header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .game-mode-tag {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(245, 197, 66, 0.14);
      border: 1px solid rgba(245, 197, 66, 0.5);
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .game-hint {
      font-size: 11px;
      color: var(--text-muted);
    }

    .time-bar-wrap {
      width: 100%;
      margin: 4px 0 10px;
      height: 6px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.06);
      overflow: hidden;
    }

    .time-bar {
      height: 100%;
      width: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #57e39a, #f5c542);
      box-shadow: 0 0 12px rgba(245, 197, 66, 0.6);
      transition: width 0.2s linear, background 0.2s, box-shadow 0.2s;
    }

    .time-bar-danger {
      background: linear-gradient(90deg, #ff4b6a, #f5c542);
      box-shadow: 0 0 14px rgba(255, 75, 106, 0.9);
    }

    .items-grid {
      margin-top: 6px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      max-height: 290px;
      overflow-y: auto;
      padding-right: 2px;
    }

    .item-card {
      background: radial-gradient(circle at top left, rgba(245, 197, 66, 0.16), rgba(5,5,10,1));
      border-radius: 14px;
      padding: 7px 7px 6px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 11px;
      position: relative;
    }

    .item-emoji {
      font-size: 18px;
      margin-bottom: 2px;
    }

    .item-name-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 4px;
    }

    .item-name {
      font-weight: 600;
    }

    .item-tier {
      font-size: 9px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-muted);
    }

    .item-tier-rare {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(245, 197, 66, 0.12);
    }

    .item-desc {
      font-size: 10px;
      color: var(--text-muted);
    }

    .item-price {
      font-size: 11px;
      font-weight: 600;
    }

    .item-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
      gap: 6px;
    }

    .item-count {
      font-size: 10px;
      color: var(--text-muted);
    }

    .item-buy-btn {
      border: none;
      border-radius: 999px;
      padding: 4px 8px;
      font-size: 10px;
      font-weight: 600;
      cursor: pointer;
      background: #f5c542;
      color: #201703;
      min-width: 70px;
      text-align: center;
      transition: transform 0.08s ease, box-shadow 0.08s ease, opacity 0.08s ease;
      box-shadow: 0 8px 18px rgba(0,0,0,0.75);
    }

    .item-buy-btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 4px 10px rgba(0,0,0,0.8);
    }

    .item-buy-btn.disabled {
      opacity: 0.4;
      cursor: not-allowed;
      box-shadow: none;
    }

    /* RESULT SCREEN */

    .result-card {
      background: var(--card);
      border-radius: 20px;
      padding: 12px 12px 14px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 22px 45px rgba(0,0,0,0.9);
    }

    .result-header {
      text-align: center;
      margin-bottom: 10px;
    }

    .result-title {
      font-size: 18px;
      font-weight: 700;
    }

    .result-sub {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .result-stats {
      margin-top: 10px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 6px;
      font-size: 11px;
    }

    .result-stat-card {
      background: rgba(10,10,18,0.95);
      border-radius: 14px;
      padding: 6px 7px;
      border: 1px solid rgba(255,255,255,0.06);
      text-align: center;
    }

    .result-label {
      color: var(--text-muted);
      font-size: 10px;
      margin-bottom: 2px;
    }

    .result-value {
      font-weight: 600;
      font-size: 12px;
    }

    .result-rank {
      font-size: 14px;
      font-weight: 700;
      color: var(--accent);
      margin-top: 6px;
    }

    .flex-list {
      margin-top: 10px;
      max-height: 140px;
      overflow-y: auto;
      padding-right: 2px;
      border-radius: 14px;
      background: rgba(255,255,255,0.01);
      border: 1px solid rgba(255,255,255,0.04);
    }

    .flex-item {
      display: flex;
      justify-content: space-between;
      padding: 6px 9px;
      font-size: 11px;
      border-bottom: 1px solid rgba(255,255,255,0.04);
    }

    .flex-item:last-child {
      border-bottom: none;
    }

    .flex-left {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .flex-emoji {
      font-size: 14px;
    }

    .flex-name {
      font-weight: 500;
    }

    .flex-count {
      font-size: 10px;
      color: var(--text-muted);
    }

    .result-actions {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .ghost-btn {
      width: 100%;
      padding: 9px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      background: transparent;
      color: var(--text-main);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: background 0.12s ease, border-color 0.12s ease, transform 0.08s ease;
    }

    .ghost-btn:active {
      transform: translateY(1px) scale(0.99);
    }

    .ghost-btn-accent {
      border-color: rgba(245, 197, 66, 0.7);
      background: var(--accent-soft);
      color: var(--accent);
    }

    .share-reward-banner {
      margin-top: 8px;
      font-size: 11px;
      padding: 7px 9px;
      border-radius: 14px;
      background: rgba(245, 197, 66, 0.08);
      border: 1px dashed rgba(245, 197, 66, 0.65);
      display: flex;
      gap: 6px;
      align-items: flex-start;
    }

    .share-reward-main {
      font-weight: 500;
      color: var(--accent);
    }

    .share-reward-sub {
      color: var(--text-muted);
      font-size: 10px;
    }

    /* TOAST */

    .toast {
      position: absolute;
      left: 50%;
      bottom: 10px;
      transform: translateX(-50%);
      background: rgba(8,8,16,0.96);
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 11px;
      display: flex;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 14px 30px rgba(0,0,0,0.9);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease, transform 0.25s ease;
    }

    .toast.show {
      opacity: 1;
      transform: translate(-50%, -4px);
      pointer-events: auto;
    }

    /* UTIL */

    .text-accent {
      color: var(--accent);
    }

    .text-muted {
      color: var(--text-muted);
    }

    /* Responsive tweaks */
    @media (max-width: 480px) {
      .app-shell {
        padding: 14px 12px 16px;
        border-radius: 22px;
      }
      .items-grid {
        max-height: 260px;
      }
      .result-stats {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (max-width: 430px) {
      .status-bar {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .status-chip {
        font-size: 10px;
        padding: 5px 6px;
      }

      .money-big {
        font-size: 14px;
      }

      .items-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 360px) {
      .status-bar {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <div class="app-header">
      <div class="app-title-block">
        <div class="app-title">
          ‚Çπ1 Trillion Rush
          <span class="app-pill">60s Spend Challenge</span>
        </div>
        <div class="app-subtitle">Feel stupid rich. Flex harder. Burn fake money.</div>
      </div>
      <div class="app-badge">
        <span>ü™ô</span>
        <span>Rich-sim ‚Ä¢ Free</span>
      </div>
    </div>

    <div class="screens">
      <!-- START SCREEN -->
      <div id="screen-start" class="screen active">
        <div class="start-hero">
          <div class="start-highlight">‚Çπ1,000,000,000,000</div>
          <h1>Spend it in 60 seconds.</h1>
          <p class="start-tagline">
            Choose your billionaire persona. Buy jets, islands, yachts & more. Then flex your results.
          </p>
        </div>
        <div class="persona-grid">
          <div class="persona-card" data-persona="tech">
            <div class="persona-emoji">üß†</div>
            <div class="persona-name">Tech Billionaire</div>
            <div class="persona-tag">Discount on futuristic & AI toys.</div>
          </div>
          <div class="persona-card" data-persona="bollywood">
            <div class="persona-emoji">üé¨</div>
            <div class="persona-name">Bollywood Star</div>
            <div class="persona-tag">Luxury lifestyle is cheaper for you.</div>
          </div>
          <div class="persona-card" data-persona="oil">
            <div class="persona-emoji">üõ¢Ô∏è</div>
            <div class="persona-name">Oil King</div>
            <div class="persona-tag">Bonus burn rate on mega purchases.</div>
          </div>
        </div>
        <div class="start-footer">
          <div class="start-info">
            <span>Start: <span class="text-accent">‚Çπ1T ‚Ä¢ 60s</span></span>
            <span>Mode: <span class="text-accent">Classic Rush</span></span>
          </div>
          <div class="pill-row">
            <span class="pill-tag">‚ö° Ultra fast</span>
            <span class="pill-tag">üõ• Yachts & jets</span>
            <span class="pill-tag">üèù Islands & moon base</span>
            <span class="pill-tag">üì∏ Flex-ready share card</span>
          </div>
          <button id="start-btn" class="primary-btn" disabled>
            <span>Start spending</span> <span>‚Üí</span>
          </button>
        </div>
      </div>

      <!-- GAME SCREEN -->
      <div id="screen-game" class="screen">
        <div class="game-section">
          <div class="status-bar">
            <div id="time-chip" class="status-chip">
              <span class="status-label">Time</span>
              <span class="status-value"><span id="time-left">60</span>s</span>
            </div>
            <div class="status-chip">
              <span class="status-label">Money left</span>
              <span class="status-value money-big"><span class="money-rupee">‚Çπ</span><span id="money-left">0</span></span>
            </div>
            <div class="status-chip">
              <span class="status-label">Persona</span>
              <span class="status-value" id="current-persona-label">-</span>
            </div>
          </div>

          <div class="time-bar-wrap">
            <div id="time-bar" class="time-bar"></div>
          </div>

          <div class="game-card">
            <div class="game-header-row">
              <div class="game-mode-tag">
                üí∏ Classic Spend
                <span style="font-size:9px; opacity:0.8;">(v1)</span>
              </div>
              <div class="game-hint">
                Tap fast. Big items = big flex.
              </div>
            </div>
            <div id="items-grid" class="items-grid"></div>
          </div>
        </div>
      </div>

      <!-- RESULT SCREEN -->
      <div id="screen-result" class="screen">
        <div class="result-card">
          <div class="result-header">
            <div class="result-title">Time‚Äôs up. How rich did you flex?</div>
            <div id="result-tagline" class="result-sub">
              You went on a decent shopping spree.
            </div>
          </div>
          <div class="result-stats">
            <div class="result-stat-card">
              <div class="result-label">Total spent</div>
              <div class="result-value"><span class="money-rupee">‚Çπ</span><span id="result-spent">0</span></div>
            </div>
            <div class="result-stat-card">
              <div class="result-label">Money left</div>
              <div class="result-value"><span class="money-rupee">‚Çπ</span><span id="result-remaining">0</span></div>
            </div>
            <div class="result-stat-card">
              <div class="result-label">Biggest flex</div>
              <div class="result-value" id="result-biggest">-</div>
            </div>
          </div>
          <div class="result-rank">
            Rank: <span id="result-rank">Middle Class Billionaire</span>
          </div>

          <div id="flex-list" class="flex-list"></div>

          <div class="share-reward-banner" id="share-banner">
            <div>üéÅ</div>
            <div>
              <div class="share-reward-main" id="share-reward-main">
                Share your flex to unlock a bonus next game.
              </div>
              <div class="share-reward-sub" id="share-reward-sub">
                Post your result on social and you‚Äôll start the next round with extra power.
              </div>
            </div>
          </div>

          <div class="result-actions">
            <button id="share-btn" class="ghost-btn ghost-btn-accent">
              <span>üì∏ Share your billionaire flex</span>
            </button>
            <button id="play-again-btn" class="ghost-btn">
              <span>üîÅ Play again with bonus</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="toast" class="toast">
      <span id="toast-icon">‚ú®</span>
      <span id="toast-text">Bonus applied.</span>
    </div>
  </div>

  <script>
    (function () {
      const START_MONEY = 1_000_000_000_000;
      const BASE_TIME = 60;

      const BONUS_KEY = "trillion_rush_bonus_v1";

      const personas = {
        tech: {
          name: "Tech Billionaire",
          emoji: "üß†",
          desc: "Discount on futuristic tech.",
          priceModifier: 0.94,
        },
        bollywood: {
          name: "Bollywood Star",
          emoji: "üé¨",
          desc: "Luxury lifestyle costs slightly less.",
          priceModifier: 0.9,
        },
        oil: {
          name: "Oil King",
          emoji: "üõ¢Ô∏è",
          desc: "Mega items burn money slightly faster.",
          priceModifier: 1.05,
        },
      };

      const items = [
        { id: "watch", name: "Swiss Luxury Watch", emoji: "‚åö", tier: "Luxury", basePrice: 5_000_000, desc: "You don‚Äôt need time, you own it." },
        { id: "sneakers", name: "Designer Sneakers", emoji: "üëü", tier: "Luxury", basePrice: 800_000, desc: "For stepping on your old salary." },
        { id: "bike", name: "Superbike", emoji: "üèçÔ∏è", tier: "Luxury", basePrice: 3_500_000, desc: "Office? What office." },
        { id: "penthouse", name: "Skyline Penthouse", emoji: "üèôÔ∏è", tier: "Luxury", basePrice: 250_000_000, desc: "Glass, marble, and bad decisions." },
        { id: "villa", name: "Beachfront Villa", emoji: "üè°", tier: "Luxury", basePrice: 500_000_000, desc: "Morning chai with a private beach." },
        { id: "supercar", name: "Hypercar", emoji: "üèéÔ∏è", tier: "Luxury", basePrice: 150_000_000, desc: "0‚Äì100 faster than your exam results." },
        { id: "art", name: "Rare Art Piece", emoji: "üñºÔ∏è", tier: "Luxury", basePrice: 80_000_000, desc: "You bought it because it was expensive." },
        { id: "diamond", name: "Insane Diamond Set", emoji: "üíé", tier: "Luxury", basePrice: 300_000_000, desc: "Shinier than your future." },

        { id: "jet", name: "Private Jet", emoji: "‚úàÔ∏è", tier: "Mega", basePrice: 20_000_000_000, desc: "Economy is now a bad word." },
        { id: "yacht", name: "Mega Yacht", emoji: "üõ•Ô∏è", tier: "Mega", basePrice: 35_000_000_000, desc: "A house, but floating." },
        { id: "island", name: "Private Island", emoji: "üèùÔ∏è", tier: "Mega", basePrice: 90_000_000_000, desc: "New address: ‚ÄòSomewhere in the ocean‚Äô." },
        { id: "hotel", name: "7-Star Hotel", emoji: "üè®", tier: "Mega", basePrice: 60_000_000_000, desc: "Your guests are richer than CEOs." },
        { id: "stadium", name: "Cricket Stadium", emoji: "üèüÔ∏è", tier: "Mega", basePrice: 45_000_000_000, desc: "Now *you* decide who wins the toss." },

        { id: "moonbase", name: "Moon Base", emoji: "üåï", tier: "Insane", basePrice: 400_000_000_000, rare: true, desc: "WFH = Work From Helium-3." },
        { id: "marsvilla", name: "Mars Mansion", emoji: "üöÄ", tier: "Insane", basePrice: 550_000_000_000, rare: true, desc: "Neighbours: just you and silence." },
        { id: "airline", name: "Entire Airline Company", emoji: "üõ´", tier: "Insane", basePrice: 300_000_000_000, rare: true, desc: "You don‚Äôt book flights, you buy routes." },
        { id: "goldstatue", name: "100m Gold Statue of You", emoji: "üóΩ", tier: "Insane", basePrice: 200_000_000_000, rare: true, desc: "Subtlety is dead." },
        { id: "aisuper", name: "AI Supercomputer Farm", emoji: "üßÆ", tier: "Insane", basePrice: 250_000_000_000, rare: true, desc: "You train models that call you ‚ÄòBoss‚Äô." },
        { id: "city", name: "Small City Rights", emoji: "üèôÔ∏è", tier: "Insane", basePrice: 600_000_000_000, rare: true, desc: "Mayor? That‚Äôs just your employee." },
      ];

      const shareRewards = [
        { type: "time", amount: 10, label: "+10s extra next game", description: "More time to burn that fake wealth." },
        { type: "time", amount: 20, label: "+20s extra next game", description: "You unlocked overtime spending mode." },
        { type: "money", amount: 50_000_000_000, label: "+‚Çπ50B extra next game", description: "Bonus cash to flex even harder." },
        { type: "money", amount: 100_000_000_000, label: "+‚Çπ100B extra next game", description: "You start richer than before." },
      ];

      const screenStart = document.getElementById("screen-start");
      const screenGame = document.getElementById("screen-game");
      const screenResult = document.getElementById("screen-result");

      const personaCards = document.querySelectorAll(".persona-card");
      const startBtn = document.getElementById("start-btn");
      const timeLeftSpan = document.getElementById("time-left");
      const moneyLeftSpan = document.getElementById("money-left");
      const timeChip = document.getElementById("time-chip");
      const currentPersonaLabel = document.getElementById("current-persona-label");
      const itemsGrid = document.getElementById("items-grid");
      const timeBar = document.getElementById("time-bar");

      const resultSpent = document.getElementById("result-spent");
      const resultRemaining = document.getElementById("result-remaining");
      const resultBiggest = document.getElementById("result-biggest");
      const resultRank = document.getElementById("result-rank");
      const resultTagline = document.getElementById("result-tagline");
      const flexList = document.getElementById("flex-list");
      const shareBanner = document.getElementById("share-banner");
      const shareRewardMain = document.getElementById("share-reward-main");
      const shareRewardSub = document.getElementById("share-reward-sub");
      const shareBtn = document.getElementById("share-btn");
      const playAgainBtn = document.getElementById("play-again-btn");

      const toastEl = document.getElementById("toast");
      const toastText = document.getElementById("toast-text");
      const toastIcon = document.getElementById("toast-icon");

      let state = {
        personaKey: null,
        timeLeft: BASE_TIME,
        initialTime: BASE_TIME,
        moneyLeft: START_MONEY,
        totalSpent: 0,
        timerId: null,
        purchases: {},
        biggestPurchase: null,
        currentReward: null,
      };

      function formatMoney(num) {
        return num.toLocaleString("en-IN");
      }

      function randomFrom(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      function showScreen(targetId) {
        [screenStart, screenGame, screenResult].forEach((el) => el.classList.remove("active"));
        const target = document.getElementById(targetId);
        if (target) target.classList.add("active");
      }

      function showToast(message, icon = "‚ú®") {
        toastText.textContent = message;
        toastIcon.textContent = icon;
        toastEl.classList.add("show");
        setTimeout(() => {
          toastEl.classList.remove("show");
        }, 2200);
      }

      function loadBonus() {
        try {
          const raw = localStorage.getItem(BONUS_KEY);
          if (!raw) return null;
          return JSON.parse(raw);
        } catch {
          return null;
        }
      }

      function clearBonus() {
        localStorage.removeItem(BONUS_KEY);
      }

      function applyBonusToState() {
        const bonus = loadBonus();
        if (!bonus) return;

        if (bonus.type === "time") {
          state.timeLeft += bonus.amount;
          showToast(`Bonus applied: +${bonus.amount}s this round`, "‚è±Ô∏è");
        } else if (bonus.type === "money") {
          state.moneyLeft += bonus.amount;
          showToast(`Bonus applied: +‚Çπ${formatMoney(bonus.amount)}`, "ü™ô");
        }
        clearBonus();
      }

      function saveShareReward(reward) {
        localStorage.setItem(BONUS_KEY, JSON.stringify(reward));
      }

      function updateTimeBar() {
        if (!timeBar || state.initialTime <= 0) return;
        const pct = (state.timeLeft / state.initialTime) * 100;
        const clamped = Math.max(0, Math.min(100, pct));
        timeBar.style.width = clamped + "%";

        if (state.timeLeft <= 10) {
          timeBar.classList.add("time-bar-danger");
        } else {
          timeBar.classList.remove("time-bar-danger");
        }
      }

      personaCards.forEach((card) => {
        card.addEventListener("click", () => {
          personaCards.forEach((c) => c.classList.remove("selected"));
          card.classList.add("selected");
          const pKey = card.dataset.persona;
          state.personaKey = pKey;
          const p = personas[pKey];
          currentPersonaLabel.textContent = p ? `${p.emoji} ${p.name}` : "-";
          startBtn.disabled = false;
        });
      });

      startBtn.addEventListener("click", () => {
        if (!state.personaKey) {
          alert("Select a persona first.");
          return;
        }
        startGame();
      });

      function startGame() {
        if (state.timerId) clearInterval(state.timerId);

        state.timeLeft = BASE_TIME;
        state.moneyLeft = START_MONEY;
        state.totalSpent = 0;
        state.purchases = {};
        state.biggestPurchase = null;
        state.currentReward = null;

        applyBonusToState();
        state.initialTime = state.timeLeft;

        timeLeftSpan.textContent = state.timeLeft;
        moneyLeftSpan.textContent = formatMoney(state.moneyLeft);
        timeChip.classList.remove("time-danger");
        updateTimeBar();

        renderItems();
        showScreen("screen-game");

        state.timerId = setInterval(() => {
          state.timeLeft -= 1;
          if (state.timeLeft <= 0) {
            state.timeLeft = 0;
            timeLeftSpan.textContent = state.timeLeft;
            updateTimeBar();
            timeChip.classList.add("time-danger");
            endGame();
            return;
          }
          timeLeftSpan.textContent = state.timeLeft;
          if (state.timeLeft <= 10) {
            timeChip.classList.add("time-danger");
          } else {
            timeChip.classList.remove("time-danger");
          }
          updateTimeBar();
        }, 1000);
      }

      function modifyPriceForPersona(item) {
        const persona = personas[state.personaKey];
        if (!persona) return item.basePrice;

        let price = item.basePrice;
        switch (state.personaKey) {
          case "tech":
            if (item.tier === "Insane" || item.id === "aisuper") price *= persona.priceModifier;
            break;
          case "bollywood":
            if (item.tier === "Luxury") price *= persona.priceModifier;
            break;
          case "oil":
            if (item.tier === "Mega" || item.tier === "Insane") price *= persona.priceModifier;
            break;
          default:
            break;
        }
        return Math.round(price);
      }

      function renderItems() {
        itemsGrid.innerHTML = "";
        const shuffled = [...items].sort(() => Math.random() - 0.5);

        shuffled.forEach((item) => {
          const price = modifyPriceForPersona(item);
          const card = document.createElement("div");
          card.className = "item-card";

          const emojiDiv = document.createElement("div");
          emojiDiv.className = "item-emoji";
          emojiDiv.textContent = item.emoji;

          const nameRow = document.createElement("div");
          nameRow.className = "item-name-row";

          const nameSpan = document.createElement("div");
          nameSpan.className = "item-name";
          nameSpan.textContent = item.name;

          const tierSpan = document.createElement("div");
          tierSpan.className = "item-tier";
          if (item.rare) {
            tierSpan.classList.add("item-tier-rare");
          }
          tierSpan.textContent = item.tier + (item.rare ? " ‚Ä¢ Rare" : "");

          nameRow.appendChild(nameSpan);
          nameRow.appendChild(tierSpan);

          const descDiv = document.createElement("div");
          descDiv.className = "item-desc";
          descDiv.textContent = item.desc;

          const footer = document.createElement("div");
          footer.className = "item-footer";

          const leftFooter = document.createElement("div");
          const priceDiv = document.createElement("div");
          priceDiv.className = "item-price";
          priceDiv.innerHTML = `<span class="money-rupee">‚Çπ</span>${formatMoney(price)}`;

          const countDiv = document.createElement("div");
          countDiv.className = "item-count";
          countDiv.textContent = "Owned: 0";

          leftFooter.appendChild(priceDiv);
          leftFooter.appendChild(countDiv);

          const btn = document.createElement("button");
          btn.className = "item-buy-btn";
          btn.textContent = "Buy";

          function updateButtonState() {
            const canAfford = state.moneyLeft >= price;
            if (!canAfford) {
              btn.classList.add("disabled");
            } else {
              btn.classList.remove("disabled");
            }
          }

          btn.addEventListener("click", () => {
            if (state.timeLeft <= 0) return;
            if (state.moneyLeft < price) {
              showToast("Not enough fake money. Go bigger earlier.", "‚ö†Ô∏è");
              updateButtonState();
              return;
            }
            state.moneyLeft -= price;
            state.totalSpent += price;
            moneyLeftSpan.textContent = formatMoney(state.moneyLeft);

            const prevCount = state.purchases[item.id] || 0;
            state.purchases[item.id] = prevCount + 1;
            countDiv.textContent = `Owned: ${state.purchases[item.id]}`;

            if (!state.biggestPurchase || price > state.biggestPurchase.price) {
              state.biggestPurchase = { item, price };
            }

            card.style.transform = "translateY(-2px) scale(1.01)";
            card.style.boxShadow = "0 14px 32px rgba(0,0,0,0.8)";
            setTimeout(() => {
              card.style.transform = "";
              card.style.boxShadow = "";
            }, 140);

            updateButtonState();
          });

          footer.appendChild(leftFooter);
          footer.appendChild(btn);

          card.appendChild(emojiDiv);
          card.appendChild(nameRow);
          card.appendChild(descDiv);
          card.appendChild(footer);

          itemsGrid.appendChild(card);

          updateButtonState();
        });
      }

      function endGame() {
        if (state.timerId) clearInterval(state.timerId);
        state.timerId = null;

        const spent = state.totalSpent;
        const remaining = state.moneyLeft;

        resultSpent.textContent = formatMoney(spent);
        resultRemaining.textContent = formatMoney(remaining);

        let biggestName = "-";
        if (state.biggestPurchase) {
          biggestName = state.biggestPurchase.item.name;
        }
        resultBiggest.textContent = biggestName;

        const percentSpent = spent / (START_MONEY + 100_000_000_000);
        let rank = "Middle Class Billionaire";
        let tagline = "You went on a decent shopping spree.";

        if (spent <= 0) {
          rank = "Paralysed in front of money";
          tagline = "You had ‚Çπ1T and bought‚Ä¶ nothing. Impressive self-control or pure panic.";
        } else if (percentSpent < 0.25) {
          rank = "Confused Rich Kid";
          tagline = "You touched a bit of wealth, but most of it just sat there judging you.";
        } else if (percentSpent < 0.5) {
          rank = "Entry-Level Tycoon";
          tagline = "Nice start. With more chaos, you can absolutely go dumber.";
        } else if (percentSpent < 0.8) {
          rank = "Mini Ambani";
          tagline = "You seriously went for it. Your flex is officially dangerous.";
        } else if (percentSpent < 1.1) {
          rank = "Certified Pesa Uday Machine";
          tagline = "You almost annihilated ‚Çπ1T. Your WhatsApp group can‚Äôt compete.";
        } else {
          rank = "God-Tier Wealth Overlord";
          tagline = "You destroyed money like it was a typo. Legends will talk about this run.";
        }

        resultRank.textContent = rank;
        resultTagline.textContent = tagline;

        flexList.innerHTML = "";
        const purchasedEntries = Object.entries(state.purchases)
          .map(([id, count]) => {
            const item = items.find((i) => i.id === id);
            return { item, count };
          })
          .filter((e) => e.item)
          .sort((a, b) => modifyPriceForPersona(b.item) * b.count - modifyPriceForPersona(a.item) * a.count);

        if (!purchasedEntries.length) {
          const emptyDiv = document.createElement("div");
          emptyDiv.className = "flex-item";
          emptyDiv.innerHTML = `<div class="flex-left"><span class="flex-emoji">üò∂</span><span class="flex-name">No flex yet</span></div><div class="flex-count">Next round, go wild.</div>`;
          flexList.appendChild(emptyDiv);
        } else {
          purchasedEntries.forEach(({ item, count }) => {
            const row = document.createElement("div");
            row.className = "flex-item";
            const left = document.createElement("div");
            left.className = "flex-left";
            const emoji = document.createElement("span");
            emoji.className = "flex-emoji";
            emoji.textContent = item.emoji;
            const nameSpan = document.createElement("span");
            nameSpan.className = "flex-name";
            nameSpan.textContent = item.name;
            const countSpan = document.createElement("span");
            countSpan.className = "flex-count";
            countSpan.textContent = `√ó${count}`;
            left.appendChild(emoji);
            left.appendChild(nameSpan);
            left.appendChild(countSpan);

            const right = document.createElement("div");
            right.className = "flex-count";
            const totalPrice = modifyPriceForPersona(item) * count;
            right.textContent = `‚Çπ${formatMoney(totalPrice)}`;

            row.appendChild(left);
            row.appendChild(right);
            flexList.appendChild(row);
          });
        }

        const reward = randomFrom(shareRewards);
        state.currentReward = reward;
        shareRewardMain.textContent = `Share this run to unlock ${reward.label}`;
        shareRewardSub.textContent = reward.description;

        showScreen("screen-result");
      }

      shareBtn.addEventListener("click", async () => {
        if (!state.currentReward) {
          showToast("Play a round first, then share.", "‚ÑπÔ∏è");
          return;
        }

        const reward = state.currentReward;
        const shareText = `I just tried to spend ‚Çπ1,000,000,000,000 in 60 seconds as a ${
          personas[state.personaKey]?.name || "billionaire"
        }. Rank: ${resultRank.textContent}. Can you beat my flex?`;

        const url = window.location.href;

        let shared = false;

        if (navigator.share) {
          try {
            await navigator.share({
              title: "‚Çπ1 Trillion Rush ‚Äì My Flex",
              text: shareText,
              url,
            });
            shared = true;
          } catch {
            shared = false;
          }
        }

        if (!navigator.share || !shared) {
          try {
            await navigator.clipboard.writeText(url);
            showToast("Link copied. Paste it anywhere to flex.", "üìã");
          } catch {
            showToast("Copy this link & share: " + url, "üìé");
          }
        }

        saveShareReward(reward);
        showToast(`Bonus unlocked: ${reward.label}`, "üéÅ");
        shareBanner.style.opacity = "0.6";
      });

      playAgainBtn.addEventListener("click", () => {
        showScreen("screen-start");
      });
    })();
  </script>
</body>
</html>
